<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Matrix0 WebUI</title>
    <link rel="stylesheet" href="https://unpkg.com/chessground@8.4.3/assets/chessground.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <style>
      :root { color-scheme: light dark; --bg: #0b0d10; --fg: #e8eaf0; --muted:#9aa4b2; --card:#12161a; --border:#1f242a; --accent:#5ac8fa;}
      @media(prefers-color-scheme: light) { :root { --bg:#f7f8fa; --fg:#0b0d10; --muted:#5b6470; --card:#ffffff; --border:#e5e8ee; --accent:#007aff; } }
      * { box-sizing: border-box; }
      body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 0; padding: 0; background: var(--bg); color: var(--fg); }
      header { padding: 12px 16px; border-bottom: 1px solid var(--border); display:flex; justify-content:space-between; align-items:center; position: sticky; top:0; backdrop-filter: blur(6px);}
      .title { font-weight:600; letter-spacing:.2px; }
      .controls { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
      label { font-size: 13px; color: var(--muted); display:flex; gap:6px; align-items:center; }
      input, select { padding: 6px 8px; border-radius: 6px; border:1px solid var(--border); background: var(--card); color: var(--fg); }
      button { padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--card); color: var(--fg); cursor:pointer; }
      button:hover { border-color: var(--accent); }
      main { display: grid; grid-template-columns: 520px 1fr; gap: 16px; padding: 16px; max-width: 1200px; margin: 0 auto; }
      #boardWrap { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 16px; }
      #board { width: 488px; height: 488px; border-radius: 8px; overflow:hidden; }
      .grid { display:grid; gap:16px; grid-template-columns: 1fr; }
      .panel { border: 1px solid var(--border); background: var(--card); padding: 12px; border-radius: 10px; }
      .row { margin: 6px 0; font-size: 13px; color: var(--muted); }
      .mono { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 12px; white-space: pre-wrap; color: var(--fg); }
      .val { font-weight: 600; color: var(--fg); }
      .columns { display:grid; grid-template-columns: 1fr 1fr; gap: 16px; }
      canvas { width: 100% !important; height: 240px !important; }
      .kvs { display:flex; gap:12px; align-items:center; }
      .badge { font-size: 12px; padding: 4px 8px; border-radius: 999px; border:1px solid var(--border); background: var(--bg); }
    </style>
  </head>
  <body>
    <header>
      <div class="title">Matrix0 WebUI — Eval only</div>
      <div class="controls">
        <label>White
          <select id="white">
            <option value="human" selected>Human</option>
            <option value="matrix0">Matrix0</option>
            <option value="stockfish">Stockfish</option>
          </select>
        </label>
        <label>Black
          <select id="black">
            <option value="matrix0" selected>Matrix0</option>
            <option value="human">Human</option>
            <option value="stockfish">Stockfish</option>
          </select>
        </label>
        <label>TC (ms) <input type="number" id="tc" min="10" step="10" value="100" /></label>
        <button id="new">New</button>
        <button id="engineMove">Engine Move</button>
        <button id="evalBtn">Eval</button>
      </div>
    </header>
    <main>
      <div id="boardWrap">
        <div id="board"></div>
      </div>
      <div class="grid">
        <div class="panel">
          <div class="kvs">
            <div>Game ID: <span id="gid" class="mono">—</span></div>
            <div class="badge">Turn: <span id="turn">—</span></div>
            <div class="badge">TC: <span id="tclabel">—</span> ms</div>
          </div>
          <div class="row">FEN</div>
          <div id="fen" class="mono"></div>
        </div>
        <div class="panel">
          <div class="kvs">
            <div>Matrix0 value: <span id="mval" class="val">—</span></div>
            <div>Stockfish cp: <span id="scpf" class="val">—</span></div>
          </div>
          <canvas id="evalChart"></canvas>
        </div>
        <div class="panel columns">
          <div>
            <div class="row">Moves</div>
            <div id="movelist" class="mono"></div>
          </div>
          <div>
            <div class="row">Analytics</div>
            <div id="analytics" class="mono">Loading…</div>
          </div>
        </div>
        <div class="panel">
          <div class="row">Messages</div>
          <div id="log" class="mono"></div>
        </div>
      </div>
    </main>
    <script src="https://unpkg.com/chess.mjs@1.3.2/dist/chess.js"></script>
    <script src="https://unpkg.com/chessground@8.4.3/dist/chessground.min.js"></script>
    <script src="/app.js"></script>
  </body>
  </html>
